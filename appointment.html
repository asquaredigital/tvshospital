<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <title>Make an Appointment | Dr. TVS Multispeciality Hospital</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="images/favicon.png">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/medicom.css">
  <link rel="stylesheet" href="css/light.css" id="choose-theme">
  <link rel="stylesheet" href="css/header.css">

  <style>
    /* ===== Appointment Form Refresh ===== */
    .appointment-sec {
      padding: 60px 0;
      background: #f7faf9;
    }

    .appt-card {
      max-width: 760px;
      margin: 0 auto;
      background: #fff;
      border: 1px solid #e6edf1;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(16,24,40,.06);
      padding: 32px;
    }

    .appointment-sec h1 {
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: .04em;
      color: #00953F;
      margin-bottom: 8px;
      text-align: center;
    }

    .appointment-sec .lead {
      color: #6b7a89;
      margin-bottom: 28px;
      font-size: 15px;
      text-align: center;
    }

    /* Grid for inputs */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .form-grid .full {
      grid-column: 1 / -1;
    }

    /* Inputs / Select / Textarea */
    .appt-card input[type="text"],
    .appt-card input[type="email"],
    .appt-card select,
    .appt-card textarea {
      width: 100%;
      height: 46px;
      border: 1px solid #d7e0e6;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 15px;
      color: #0f172a;
      background: #fff;
      transition: border-color .2s ease, box-shadow .2s ease;
    }

    .appt-card textarea {
      min-height: 200px;
      resize: vertical;
      line-height: 1.5;
    }

    .appt-card input::placeholder,
    .appt-card textarea::placeholder {
      color: #9aa7b2;
    }

    .appt-card input:focus,
    .appt-card select:focus,
    .appt-card textarea:focus {
      outline: none;
      border-color: #00953F;
      box-shadow: 0 0 0 3px rgba(0,149,63,.15);
    }

    /* Labels */
    .appt-label {
      display: block;
      font-weight: 700;
      font-size: 13px;
      color: #334155;
      margin: 6px 0 6px;
    }

    /* Button */
    .appt-submit {
      display: inline-block;
      padding: 12px 22px;
      border-radius: 12px;
      background: #302582;   /* violet accent */
      color: #fff;
      font-weight: 700;
      border: none;
      transition: transform .1s ease, box-shadow .2s ease, background .2s ease;
    }

    .appt-submit:hover { background: #251c68; }
    .appt-submit:active { transform: translateY(1px); }

    /* Responsive */
    @media (max-width: 767px){
      .form-grid { grid-template-columns: 1fr; }
      .appt-card { padding: 22px; }
    }
  </style>

  <!-- JS -->
  <script src="js/modernizr-2.6.2.min.js"></script>
  <script src="js/jquery.js"></script>
  <script>
    $(function () {
      $("#header1").load("header.html");
      $("#footer").load("footer.html");
    });
  </script>
</head>
<body class="fixed-header">

  <!-- Wrapper -->
  <div id="wrapper" class="clearfix">

    <!-- Header -->
    <header id="header1"></header>

    <!-- Banner -->
    <section class="sub-page-banner text-center" data-stellar-background-ratio="0.3">
      <div class="overlay"></div>
      <div class="container">
        <h1 class="entry-title">Make an Appointment</h1>
      </div>
    </section>

    <!-- Appointment Section -->
    <section class="appointment-sec">
      <div class="container">
        <h1>Make an Appointment</h1>
        <p class="lead">Fill in the details below and submit the form. We will contact you via phone or email to confirm your schedule.</p>

        <div class="appt-card">
          <div id="message-contact" class="success" style="display:none;">Thank you! We'll contact you shortly.</div>

          <form id="appointment_form" action="" method="post">
            <div class="form-grid">
              <!-- Name -->
              <div>
                <label for="u_name" class="appt-label">Name</label>
                <input type="text" name="u_name" id="u_name" placeholder="Your full name" required>
              </div>

              <!-- Email -->
              <div>
                <label for="u_email" class="appt-label">Email Address</label>
                <input type="email" name="u_email" id="u_email" placeholder="name@example.com" required>
              </div>

              <!-- Email -->
              <div>
                <label for="u_email" class="appt-label">Email Address</label>
                <input type="text" name="phone" id="phone" placeholder="Phone Number">
              </div>

              <!-- Doctor -->
              <div class="full">
                <label for="doctorSelect" class="appt-label">Select a Doctor</label>
                <select id="doctorSelect" name="doctor" required>
                  <option value="">-- Choose a Doctor --</option>
                  <option value="Dr. T.V. Sathappan">Dr. T.V. Sathappan, M.S., M.Ch., FACS., FICS</option>
                  <option value="Dr. Rajarajan Jayachandran">Dr. Rajarajan Jayachandran, MBBS, MS, MCh</option>
                  <option value="Dr. T. Rajendran">Dr. T. Rajendran, MBBS., DNB</option>
                  <option value="Dr. S. Sangeetha">Dr. S. Sangeetha, MBBS., DGO., FRM</option>
                  <option value="Dr. Amrutha Sathappan">Dr. Amrutha Sathappan, MBBS., M.S., (ENT)</option>
                  <option value="Others">Others</option>
                </select>
              </div>

              <!-- Message -->
              <div class="full">
                <label for="message" class="appt-label">Message</label>
                <textarea name="message" id="message" placeholder="Share your symptoms or preferred date/time"></textarea>
              </div>
            </div>

            <div style="margin-top:18px;">
              <input type="submit" class="appt-submit" value="Submit Appointment Request">
            </div>
            <div id="response-message" style="text-align: right; color:white">
           </div>
          </form>
          
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="footer"></footer>
    <a href="#." class="back-to-top" id="back-to-top"><i class="fa fa-angle-up"></i></a>
  </div>

  <!-- JS -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/scripts.js"></script>
<script>
  $(function () {
    $('#appointment_form').on('submit', function (event) {
      event.preventDefault();

      const $form = $(this);
      const $btn  = $form.find('.appt-submit');
      const $msg  = $('#response-message');

      const data = {
        u_name:  $('#u_name').val().trim(),
        u_email: $('#u_email').val().trim(),
        phone:   $('#phone').val().trim(),
        doctor:  $('#doctorSelect').val(),
        message: $('#message').val().trim()
      };

      const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(data.u_email);
      if (!data.u_name || !emailOk || !data.doctor) {
        $msg.text('Please enter your name, a valid email, and select a doctor.').css({ color: '#b42318' });
        return;
      }
      if (data.phone && !/^[0-9+\-\s()]{6,}$/.test(data.phone)) {
        $msg.text('Please enter a valid phone number.').css({ color: '#b42318' });
        return;
      }

      const originalText = $btn.val();
      $btn.prop('disabled', true).val('Submitting...');

      $.ajax({
        type: 'POST',
        url: $form.attr('action') || 'contact.php',
        data: data,
        dataType: 'json'
      })
      .done(function (response) {
        const ok   = !!(response && response.success);
        const text = (response && response.message) ? response.message
                  : (ok ? 'Your appointment request has been submitted.' : 'We could not submit your request.');

        $msg.text(text).css({ color: ok ? '#067647' : '#b42318' });

        if (ok) {
          // Reset the form
          $form.trigger('reset');
          $('#doctorSelect').val('');

          // ===== Open WhatsApp with same details =====
          const toNumber = '919962112230'; // country code + number (India = 91)
          const waMessage =
            'New appointment request:%0A%0A' +
            'Name: '   + encodeURIComponent(data.u_name)  + '%0A' +
            'Email: '  + encodeURIComponent(data.u_email) + '%0A' +
            'Phone: '  + encodeURIComponent(data.phone || 'N/A') + '%0A' +
            'Doctor: ' + encodeURIComponent(data.doctor)  + '%0A' +
            'Message:%0A' + encodeURIComponent(data.message || '');

          // Open WhatsApp Web / App
          const waURL = 'https://api.whatsapp.com/send?phone=' + toNumber + '&text=' + waMessage;
          window.open(waURL, '_blank');
        }
      })
      .fail(function (xhr) {
        let text = 'Error occurred while processing the request.';
        if (xhr.responseJSON && xhr.responseJSON.message) text = xhr.responseJSON.message;
        else if (xhr.responseText) text = xhr.responseText;
        $msg.text(text).css({ color: '#b42318' });
      })
      .always(function () {
        $btn.prop('disabled', false).val(originalText);
      });
    });
  });
</script>



</body>
</html>
